{% extends "base.html" %}
{% load staticfiles %}
{% block content %}


 <div class="row" style="
 top: 0;
 bottom: 0;
 left: 0;
 right: 0;
 width: 200px;
 margin: auto;
 padding-bottom: 269px">
 <div class="col-sm-12">
    <form id="formlocal" method="POST" action="{% url 'estudante' %}">
    <div class="col-sm-1"></div>
    <div class="col-sm-4">
        <div class="card" style="width: 18rem;">
            <img class="card-img-top"  alt="Card image cap">
            <div class="card-body">
       <a type="button" href="{% url 'minhas-republicas' %}" class="btn btn-primary">Proprietário</a>
    </div>
    </div>
    </div>
    <div class="col-sm-2"></div>
        <div class="col-sm-4">
            <div class="card" style="width: 18rem;">
                <img class="card-img-top" src="..." alt="Card image cap">
                <div class="card-body">
        <button type="submit" id="estudante" class="btn btn-light" >Estudante</button>
     </div>
     </div>
     </div>
     <div class="col-sm-1"></div>
     <input type="hidden" name="latitude" id="lati" value="">
     <input type="hidden"  name="longitude" id="longi" value="">
     </form>
 </div>
 </div>
<script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
<script type="text/javascript">


function getLocation()
  {
    console.log('lala');
      var lat = $("#latitude").val();
      var lng = $("#longitude").val();
      $('#lati').val(lat);
      $('#longi').val(lng);
    }
window.onload = getLocation();
var form = $('#formlocal');
form.submit(function(){
  if (form[0][1].value == ""){
    alert("Por favor retorne e ative a localização.");
    window.location.reload();
    return false
  }
$.ajax({
    type: 'POST',
    url: form.attr('action'),
    data: form.serialize(),
    success: function (data) {
      console.log(data)
    }
  });
});


  </script>
{% endblock %}

